{
  "version": 1,
  "app": "SOS Expat",
  "schema": "sosexpat.message.template/v1",
  "locale": "en-GB",
  "defaults": {
    "from_email": "SOS Expat <no-reply@sosexpat.app>",
    "reply_to": "Support SOS Expat <support@sosexpat.app>",
    "sms_sender_id": "SOSXPAT",
    "push_icon": "ic_notification",
    "push_channel_id": "general",
    "deeplink_base": "sosexpat://"
  },
  "templates": [
    {
      "id": "user.signup.success",
      "roles": [
        "client"
      ],
      "channels": {
        "email": true,
        "sms": true,
        "push": true,
        "inapp": true,
        "whatsapp": false
      },
      "email": {
        "subject": "Welcome aboard, {{user.firstName}} 👋",
        "html": "<h1>Welcome!</h1><p>Your account is ready. Two minutes to complete your profile and you're good ✨</p><p><a href='{{webappUrl}}/profile'>Complete profile</a></p>",
        "text": "Welcome {{user.firstName}}! Your profile is here: {{webappUrl}}/profile"
      },
      "sms": {
        "text": "Welcome {{user.firstName}}! Ready to roll? Complete your profile: {{webappUrl}}/profile"
      },
      "push": {
        "title": "Welcome!",
        "body": "Complete your profile to get matched faster ✨",
        "deeplink": "sosexpat://profile"
      },
      "inapp": {
        "title": "Welcome 👋",
        "body": "Add a few details and you're ready.",
        "action": {
          "label": "Complete",
          "deeplink": "/profile"
        }
      }
    },
    {
      "id": "provider.signup.success",
      "roles": [
        "provider"
      ],
      "channels": {
        "email": true,
        "sms": false,
        "push": true,
        "inapp": true,
        "whatsapp": false
      },
      "email": {
        "subject": "Welcome, provider {{user.firstName}} 🚀",
        "html": "<h1>Welcome!</h1><p>Complete your profile (skills, countries, availability) to start getting requests 💼</p><p><a href='{{webappUrl}}/provider/profile'>Complete provider profile</a></p>",
        "text": "Welcome {{user.firstName}}! Finish your provider profile: {{webappUrl}}/provider/profile"
      },
      "push": {
        "title": "Provider account ready",
        "body": "Add skills & availability to appear ✨",
        "deeplink": "sosexpat://provider/profile"
      },
      "inapp": {
        "title": "Hello pro 👋",
        "body": "Checklist ready to boost visibility.",
        "action": {
          "label": "Complete",
          "deeplink": "/provider/profile"
        }
      }
    },
    {
      "id": "user.profile.incomplete.d1",
      "roles": [
        "client"
      ],
      "channels": {
        "email": true,
        "sms": false,
        "push": true,
        "inapp": false,
        "whatsapp": false
      },
      "email": {
        "subject": "Your profile is almost perfect ✨",
        "html": "<p>Add one tiny detail and you're ready to match with the best providers.</p><p><a href='{{webappUrl}}/profile'>Complete now</a></p>",
        "text": "One tiny detail left! {{webappUrl}}/profile"
      },
      "push": {
        "title": "Almost there 😎",
        "body": "Finish your profile (1 min) and we'll take it from there.",
        "deeplink": "sosexpat://profile"
      }
    },
    {
      "id": "provider.profile.incomplete.d1",
      "roles": [
        "provider"
      ],
      "channels": {
        "email": true,
        "sms": false,
        "push": true,
        "inapp": false,
        "whatsapp": false
      },
      "email": {
        "subject": "Boost visibility: complete your profile 💡",
        "html": "<p>Add skills & countries to receive more qualified requests.</p><p><a href='{{webappUrl}}/provider/profile'>Complete</a></p>",
        "text": "Add your skills & countries: {{webappUrl}}/provider/profile"
      },
      "push": {
        "title": "Need a boost? ✨",
        "body": "Complete your pro profile and shine on SOS Expat.",
        "deeplink": "sosexpat://provider/profile"
      }
    },
    {
      "id": "request.created.client",
      "roles": [
        "client"
      ],
      "channels": {
        "email": true,
        "sms": false,
        "push": true,
        "inapp": true,
        "whatsapp": false
      },
      "email": {
        "subject": "Request received ✅ — \"{{request.title}}\"",
        "html": "<p>We're reviewing and will update you super fast.</p><p><a href='{{webappUrl}}/requests/{{request.id}}'>View request</a></p>",
        "text": "Request saved for \"{{request.title}}\". Track: {{webappUrl}}/requests/{{request.id}}"
      },
      "push": {
        "title": "Request saved",
        "body": "We've got you ⏳",
        "deeplink": "sosexpat://requests/{{request.id}}"
      },
      "inapp": {
        "title": "Under review",
        "body": "We'll be quick 😉",
        "action": {
          "label": "View",
          "deeplink": "/requests/{{request.id}}"
        }
      }
    },
    {
      "id": "request.created.provider",
      "channels": {
        "email": true,
        "sms": true,
        "whatsapp": false,
        "push": false,
        "inapp": false
      },
      "email": {
        "subject": "New client request",
        "html": "",
        "text": "You received a request from {{clientName}} ({{clientCountry}}): {{requestTitle}}. Budget ~{{amountEUR}}€. {{requestDescription}}"
      },
      "sms": {
        "text": "New request from {{clientName}} ({{clientCountry}}): \"{{requestTitle}}\". ~{{amountEUR}}€ — {{requestDescription}}"
      }
    },
    {
      "id": "request.needs_changes.client",
      "roles": [
        "client"
      ],
      "channels": {
        "email": true,
        "sms": false,
        "push": true,
        "inapp": true,
        "whatsapp": false
      },
      "email": {
        "subject": "Tiny tweak and we're golden ✨",
        "html": "<p>We just need a detail: {{review.note}}</p><p><a href='{{webappUrl}}/requests/{{request.id}}/edit'>Complete</a></p>",
        "text": "We're missing a detail: {{review.note}} — {{webappUrl}}/requests/{{request.id}}/edit"
      },
      "push": {
        "title": "Action needed",
        "body": "Add the missing info (1 min ⏱️)",
        "deeplink": "sosexpat://requests/{{request.id}}/edit"
      },
      "inapp": {
        "title": "Quick fix ✍️",
        "body": "Add what's missing for quick approval.",
        "action": {
          "label": "Complete",
          "deeplink": "/requests/{{request.id}}/edit"
        }
      }
    },
    {
      "id": "request.approved.client",
      "roles": [
        "client"
      ],
      "channels": {
        "email": true,
        "sms": false,
        "push": true,
        "inapp": true,
        "whatsapp": false
      },
      "email": {
        "subject": "Approved 🎉 — \"{{request.title}}\"",
        "html": "<p>Let's go! Head to payment to kick things off.</p><p><a href='{{webappUrl}}/checkout/{{request.id}}'>Pay now</a></p>",
        "text": "Approved. Pay here: {{webappUrl}}/checkout/{{request.id}}"
      },
      "push": {
        "title": "Request approved",
        "body": "Let's go 🚀",
        "deeplink": "sosexpat://checkout/{{request.id}}"
      },
      "inapp": {
        "title": "Go time 🎉",
        "body": "Make payment and we'll connect your provider.",
        "action": {
          "label": "Pay",
          "deeplink": "/checkout/{{request.id}}"
        }
      }
    },
    {
      "id": "checkout.abandoned.client.24h",
      "roles": [
        "client"
      ],
      "channels": {
        "email": true,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      },
      "email": {
        "subject": "We saved your request 🔥",
        "html": "<p>Finish in one minute, promise.</p><p><a href='{{webappUrl}}/checkout/{{request.id}}'>Complete payment</a></p>",
        "text": "Your request is waiting 😌 : {{webappUrl}}/checkout/{{request.id}}"
      }
    },
    {
      "id": "payment.succeeded.client",
      "roles": [
        "client"
      ],
      "channels": {
        "email": true,
        "sms": true,
        "push": true,
        "inapp": true,
        "whatsapp": false
      },
      "email": {
        "subject": "Payment confirmed — {{request.title}}",
        "html": "<p>Thank you 🙏 Your provider is notified. Chat is open 🔓</p><p><a href='{{webappUrl}}/requests/{{request.id}}'>View my request</a></p>",
        "text": "Payment confirmed for \"{{request.title}}\". Your provider is notified. {{webappUrl}}/requests/{{request.id}}"
      },
      "sms": {
        "text": "✅ Payment OK for \"{{request.title}}\". Your provider will reach out shortly."
      },
      "push": {
        "title": "Payment confirmed",
        "body": "Chat ready. Let's chat 💬",
        "deeplink": "sosexpat://requests/{request.id}"
      },
      "inapp": {
        "title": "Thank you ✨",
        "body": "Your provider has been notified.",
        "action": {
          "label": "View request",
          "deeplink": "/requests/{{request.id}}"
        }
      }
    },
    {
      "id": "payment.failed.client",
      "roles": [
        "client"
      ],
      "channels": {
        "email": true,
        "sms": true,
        "push": false,
        "inapp": true,
        "whatsapp": false
      },
      "email": {
        "subject": "Oops — payment failed",
        "html": "<p>It happens. Try another card or ping support — we've got you 💬</p><p><a href='{{webappUrl}}/checkout/{{request.id}}'>Try again</a></p>",
        "text": "Payment failed for "{{request.title}}". Try again: {{webappUrl}}/checkout/{{request.id}}"
      },
      "sms": {
        "text": "⚠️ Payment failed for "{{request.title}}". Try again: {{webappUrl}}/checkout/{{request.id}}"
      },
      "inapp": {
        "title": "Payment failed 😕",
        "body": "Shall we try again?",
        "action": {
          "label": "Retry",
          "deeplink": "/checkout/{{request.id}}"
        }
      }
    },
    {
      "id": "handoff.started.client",
      "roles": [
        "client"
      ],
      "channels": {
        "email": true,
        "sms": false,
        "push": true,
        "inapp": true,
        "whatsapp": false
      },
      "email": {
        "subject": "Connecting you now 🤝",
        "html": "<p>Your provider is joining the chat. Get your questions ready!</p><p><a href='{{webappUrl}}/messages'>Open chat</a></p>",
        "text": "It's happening! Your provider is joining the chat: {{webappUrl}}/messages"
      },
      "push": {
        "title": "It's happening ✨",
        "body": "Your provider is on the way to chat.",
        "deeplink": "sosexpat://messages"
      },
      "inapp": {
        "title": "Connecting the dots 🤝",
        "body": "You'll chat in real time.",
        "action": {
          "label": "Open chat",
          "deeplink": "/messages"
        }
      }
    },
    {
      "id": "handoff.to.provider",
      "roles": [
        "provider"
      ],
      "channels": {
        "email": true,
        "sms": false,
        "push": true,
        "inapp": true,
        "whatsapp": true
      },
      "email": {
        "subject": "New client confirmed — {{request.title}}",
        "html": "<p>Client paid ✅ Here's the recap and direct chat link.</p><p><a href='{{webappUrl}}/provider/messages/{{thread.id}}'>Open chat</a></p>",
        "text": "New client confirmed. Chat: {{webappUrl}}/provider/messages/{{thread.id}}"
      },
      "push": {
        "title": "New client 🎉",
        "body": "Open the chat and say hi 💬",
        "deeplink": "sosexpat://provider/messages/{thread.id}"
      },
      "inapp": {
        "title": "Client confirmed",
        "body": "Thread is ready for you.",
        "action": {
          "label": "Open chat",
          "deeplink": "/provider/messages/{{thread.id}}"
        }
      },
      "whatsapp": {
        "twilio_template_name": "new_client_confirmed",
        "params": [
          "{{client.firstName}}",
          "{{client.nationality}}",
          "{{request.country}}",
          "{{request.title}}",
          "{{request.description}}",
          "{{client.language}}",
          "{{webappUrl}}/provider/messages/{{thread.id}}"
        ]
      }
    },
    {
      "id": "message.new.client",
      "roles": [
        "client"
      ],
      "channels": {
        "email": false,
        "sms": false,
        "push": true,
        "inapp": true,
        "whatsapp": false
      },
      "push": {
        "title": "New message 💬",
        "body": "From {{provider.firstName}} — your turn 😉",
        "deeplink": "sosexpat://messages/{thread.id}"
      },
      "inapp": {
        "title": "New message",
        "body": "Reply when you can 😉",
        "action": {
          "label": "Open",
          "deeplink": "/messages/{{thread.id}}"
        }
      }
    },
    {
      "id": "message.new.provider",
      "roles": [
        "provider"
      ],
      "channels": {
        "email": false,
        "sms": false,
        "push": true,
        "inapp": true,
        "whatsapp": false
      },
      "push": {
        "title": "Message from {{client.firstName}} 💬",
        "body": "A quick reply goes a long way ✨",
        "deeplink": "sosexpat://provider/messages/{thread.id}"
      },
      "inapp": {
        "title": "New message",
        "body": "Fast replies = happy clients ✨",
        "action": {
          "label": "Reply",
          "deeplink": "/provider/messages/{{thread.id}}"
        }
      }
    },
    {
      "id": "messages.digest.client.daily",
      "roles": [
        "client"
      ],
      "channels": {
        "email": true,
        "sms": false,
        "push": false,
        "inapp": false,
        "whatsapp": false
      },
      "email": {
        "subject": "You have {{unreadCount}} unread message(s) 💌",
        "html": "<p>Time for a quick catch‑up?</p><p><a href='{{webappUrl}}/messages'>Reply now</a></p>",
        "text": "You have {{unreadCount}} unread message(s). Reply here: {{webappUrl}}/messages"
      }
    },
    {
      "id": "request.closed.client",
      "roles": [
        "client"
      ],
      "channels": {
        "email": true,
        "sms": false,
        "push": true,
        "inapp": true,
        "whatsapp": false
      },
      "email": {
        "subject": "All done ✅",
        "html": "<p>Thanks a bunch! Mind dropping a quick rating?</p><p><a href='{{webappUrl}}/reviews/new?requestId={{request.id}}'>Rate provider</a></p>",
        "text": "Thanks! Leave a rating: {{webappUrl}}/reviews/new?requestId={{request.id}}"
      },
      "push": {
        "title": "Request completed",
        "body": "Rate your provider ✨",
        "deeplink": "sosexpat://reviews/new?requestId={request.id}"
      },
      "inapp": {
        "title": "Thank you 🙏",
        "body": "Your review helps others.",
        "action": {
          "label": "Rate",
          "deeplink": "/reviews/new?requestId={{request.id}}"
        }
      }
    },
    {
      "id": "request.closed.provider",
      "roles": [
        "provider"
      ],
      "channels": {
        "email": true,
        "sms": false,
        "push": true,
        "inapp": true,
        "whatsapp": false
      },
      "email": {
        "subject": "Job completed — nice one ✨",
        "html": "<p>{{client.firstName}}'s request is closed. Your stats have been updated.</p><p><a href='{{webappUrl}}/provider/stats'>View stats</a></p>",
        "text": "Job completed for {{client.firstName}}. Stats updated: {{webappUrl}}/provider/stats"
      },
      "push": {
        "title": "Request closed",
        "body": "Your performance has been updated.",
        "deeplink": "sosexpat://provider/stats"
      },
      "inapp": {
        "title": "Nice job 👏",
        "body": "Have a look at your stats.",
        "action": {
          "label": "View stats",
          "deeplink": "/provider/stats"
        }
      }
    },
    {
      "id": "client.post_closure.d7",
      "roles": [
        "client"
      ],
      "channels": {
        "email": true,
        "sms": false,
        "push": true,
        "inapp": false,
        "whatsapp": false
      },
      "email": {
        "subject": "What's next? We can help 💡",
        "html": "<p>We can also assist with {{suggestions.topCountry}} or {{suggestions.topService}}.</p><p><a href='{{webappUrl}}/services'>Explore</a></p>",
        "text": "Need a hand? {{webappUrl}}/services"
      },
      "push": {
        "title": "Need help?",
        "body": "We've got ideas for your next step 😉",
        "deeplink": "sosexpat://services"
      }
    },
    {
      "id": "security.suspicious_login",
      "roles": [
        "client",
        "provider"
      ],
      "channels": {
        "email": true,
        "sms": true,
        "push": false,
        "inapp": true,
        "whatsapp": false
      },
      "email": {
        "subject": "Security alert 🔒",
        "html": "<p>Login from {{security.city}}, {{security.country}} ({{security.ip}}).</p><p>If this wasn't you, change your password.</p><p><a href='{{webappUrl}}/security'>Secure my account</a></p>",
        "text": "Suspicious login detected. If not you: {{webappUrl}}/security"
      },
      "sms": {
        "text": "⚠️ Suspicious login. Secure your account: {{webappUrl}}/security"
      },
      "inapp": {
        "title": "Security",
        "body": "We've got your back. Update your password if needed.",
        "action": {
          "label": "Secure",
          "deeplink": "/security"
        }
      }
    },
    {
      "id": "provider.monthly.report",
      "roles": [
        "provider"
      ],
      "channels": {
        "email": true,
        "sms": false,
        "push": true,
        "inapp": true,
        "whatsapp": false
      },
      "email": {
        "subject": "Your month at a glance — {{date.monthName}} {{date.year}}",
        "html": "<p>{{metrics.clients}} clients • €{{metrics.revenue}} • {{metrics.rating}}★</p><p><a href='{{webappUrl}}/provider/stats?period=month'>See details</a></p>",
        "text": "Report: {{metrics.clients}} clients • €{{metrics.revenue}} • {{metrics.rating}}★"
      },
      "push": {
        "title": "Monthly report 📈",
        "body": "Your monthly stats are ready.",
        "deeplink": "sosexpat://provider/stats?period=month"
      },
      "inapp": {
        "title": "Monthly report",
        "body": "Look what you achieved 👏",
        "action": {
          "label": "Open",
          "deeplink": "/provider/stats?period=month"
        }
      }
    }
  ]
}