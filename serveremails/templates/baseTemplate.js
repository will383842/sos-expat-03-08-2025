"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.baseTemplate = void 0;
// Configuration i18n
var translations = {
    fr: {
        title: "SOS Expat",
        subtitle: "Votre passeport vers la liberté",
        ctaText: "Découvrir l'app",
        shareText: "Partagez la liberté avec vos proches",
        footerText: "Born to explore, made to protect"
    },
    en: {
        title: "SOS Expat",
        subtitle: "Your passport to freedom",
        ctaText: "Discover the app",
        shareText: "Share freedom with your loved ones",
        footerText: "Born to explore, made to protect"
    }
};
// Fonction de tracking Firebase optimisée
var generateTrackingPixel = function (config) {
    if (!config.trackingId)
        return '';
    var params = new URLSearchParams({
        tid: config.trackingId,
        uid: config.userId || 'anonymous',
        cid: config.campaignId || 'default',
        t: 'event',
        ec: 'email',
        ea: 'open',
        el: config.locale,
        cm: 'email',
        cs: 'newsletter'
    }).toString();
    return "<img src=\"https://www.google-analytics.com/collect?".concat(params, "\" width=\"1\" height=\"1\" alt=\"\" style=\"display:none;\" />");
};
// Template principal optimisé
var baseTemplate = function (content, config) {
    if (config === void 0) { config = { locale: 'fr', theme: 'light' }; }
    var t = translations[config.locale] || translations.fr;
    var trackingPixel = generateTrackingPixel(config);
    var currentYear = new Date().getFullYear();
    // URLs optimisées avec tracking UTM
    var appUrl = "https://sos-expat.app?utm_source=email&utm_medium=cta&utm_campaign=".concat(config.campaignId || 'default', "&utm_content=").concat(config.locale);
    var shareUrl = encodeURIComponent("\uD83C\uDF0D\u2708\uFE0F D\u00E9couvrez SOS Expat pour voyager l'esprit libre : ".concat(appUrl));
    var whatsappUrl = "https://wa.me/?text=".concat(shareUrl);
    return "<!DOCTYPE html>\n<html lang=\"".concat(config.locale, "\" xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\">\n<head>\n  <!--[if gte mso 9]><xml><o:OfficeDocumentSettings><o:AllowPNG/><o:PixelsPerInch>96</o:PixelsPerInch></o:OfficeDocumentSettings></xml><![endif]-->\n  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0\">\n  <meta name=\"format-detection\" content=\"telephone=no, date=no, address=no, email=no, url=no\">\n  <meta name=\"color-scheme\" content=\"light dark\">\n  <meta name=\"supported-color-schemes\" content=\"light dark\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  \n  <!-- SEO & Social Media Meta Tags -->\n  <title>").concat(t.title, " - ").concat(t.subtitle, "</title>\n  <meta name=\"description\" content=\"SOS Expat : votre compagnon de voyage pour explorer le monde en toute s\u00E9curit\u00E9. Application mobile pour expatri\u00E9s et voyageurs.\">\n  <meta name=\"keywords\" content=\"voyage, expatri\u00E9, s\u00E9curit\u00E9, application mobile, SOS, assistance, international\">\n  <meta name=\"author\" content=\"SOS Expat\">\n  <meta name=\"robots\" content=\"index, follow\">\n  \n  <!-- Open Graph / Facebook -->\n  <meta property=\"og:type\" content=\"website\">\n  <meta property=\"og:url\" content=\"").concat(appUrl, "\">\n  <meta property=\"og:title\" content=\"").concat(t.title, " - ").concat(t.subtitle, "\">\n  <meta property=\"og:description\" content=\"Votre compagnon de voyage pour explorer le monde en toute s\u00E9curit\u00E9\">\n  <meta property=\"og:image\" content=\"https://sos-expat.app/assets/og-image.jpg\">\n  <meta property=\"og:image:width\" content=\"1200\">\n  <meta property=\"og:image:height\" content=\"630\">\n  <meta property=\"og:site_name\" content=\"SOS Expat\">\n  <meta property=\"og:locale\" content=\"").concat(config.locale, "_").concat(config.locale.toUpperCase(), "\">\n  \n  <!-- Twitter -->\n  <meta property=\"twitter:card\" content=\"summary_large_image\">\n  <meta property=\"twitter:url\" content=\"").concat(appUrl, "\">\n  <meta property=\"twitter:title\" content=\"").concat(t.title, " - ").concat(t.subtitle, "\">\n  <meta property=\"twitter:description\" content=\"Votre compagnon de voyage pour explorer le monde en toute s\u00E9curit\u00E9\">\n  <meta property=\"twitter:image\" content=\"https://sos-expat.app/assets/twitter-image.jpg\">\n  <meta name=\"twitter:creator\" content=\"@sosexpat\">\n  \n  <!-- Structured Data for AI/ChatGPT -->\n  <script type=\"application/ld+json\">\n  {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"SoftwareApplication\",\n    \"name\": \"").concat(t.title, "\",\n    \"description\": \"Application mobile d'assistance pour voyageurs et expatri\u00E9s\",\n    \"applicationCategory\": \"TravelApplication\",\n    \"operatingSystem\": \"iOS, Android\",\n    \"url\": \"").concat(appUrl, "\",\n    \"publisher\": {\n      \"@type\": \"Organization\",\n      \"name\": \"SOS Expat\",\n      \"url\": \"https://sos-expat.app\"\n    },\n    \"offers\": {\n      \"@type\": \"Offer\",\n      \"price\": \"0\",\n      \"priceCurrency\": \"EUR\"\n    }\n  }\n  </script>\n  \n  <!--[if mso]>\n  <noscript>\n    <xml>\n      <o:OfficeDocumentSettings>\n        <o:PixelsPerInch>96</o:PixelsPerInch>\n      </o:OfficeDocumentSettings>\n    </xml>\n  </noscript>\n  <![endif]-->\n  \n  <style type=\"text/css\">\n    /* Reset & Base Styles */\n    * { box-sizing: border-box; }\n    body, table, td, a { -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }\n    table, td { mso-table-lspace: 0pt; mso-table-rspace: 0pt; }\n    img { -ms-interpolation-mode: bicubic; border: 0; outline: none; text-decoration: none; }\n    \n    /* Mobile-First Responsive */\n    @media screen and (max-width: 600px) {\n      .container { width: 100% !important; max-width: 100% !important; }\n      .mobile-padding { padding: 15px !important; }\n      .mobile-text { font-size: 14px !important; line-height: 1.5 !important; }\n      .mobile-title { font-size: 28px !important; }\n      .mobile-button { padding: 14px 25px !important; font-size: 16px !important; }\n      .mobile-hide { display: none !important; }\n    }\n    \n    @media screen and (max-width: 480px) {\n      .mobile-padding { padding: 12px !important; }\n      .mobile-title { font-size: 24px !important; }\n    }\n    \n    /* Dark Mode Support */\n    @media (prefers-color-scheme: dark) {\n      .dark-bg { background-color: #1a1a1a !important; }\n      .dark-text { color: #ffffff !important; }\n      .dark-secondary { color: #e0e0e0 !important; }\n    }\n    \n    /* High Contrast Mode */\n    @media (prefers-contrast: high) {\n      .high-contrast { border: 2px solid #000000 !important; }\n    }\n    \n    /* Reduced Motion */\n    @media (prefers-reduced-motion: reduce) {\n      * { animation: none !important; transition: none !important; }\n    }\n    \n    /* Touch Optimization */\n    .touch-target {\n      min-height: 44px;\n      min-width: 44px;\n      display: inline-block;\n      text-align: center;\n    }\n    \n    /* Loading Performance */\n    .preload-font { font-display: swap; }\n  </style>\n</head>\n\n<body style=\"margin: 0; padding: 0; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;\" class=\"dark-bg\">\n  ").concat(trackingPixel, "\n  \n  <!-- Preconnect for performance -->\n  <div style=\"display: none;\">\n    <link rel=\"preconnect\" href=\"https://sos-expat.app\">\n    <link rel=\"preconnect\" href=\"https://wa.me\">\n  </div>\n  \n  <!-- Main Container -->\n  <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\">\n    <tr>\n      <td align=\"center\" style=\"padding: 20px 0;\">\n        \n        <!-- Email Content -->\n        <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" class=\"container\" style=\"max-width: 600px; width: 100%; background: #ffffff; border-radius: 24px; overflow: hidden; box-shadow: 0 20px 40px rgba(0,0,0,0.1);\" class=\"dark-bg\">\n          \n          <!-- Header -->\n          <tr>\n            <td style=\"background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); padding: 40px 30px; text-align: center; position: relative;\" class=\"mobile-padding\">\n              <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n                <tr>\n                  <td>\n                    <h1 style=\"color: #ffffff; margin: 0; font-size: 32px; font-weight: 700; text-shadow: 0 2px 4px rgba(0,0,0,0.1); font-family: inherit;\" class=\"mobile-title\">\n                      \uD83D\uDE80 ").concat(t.title, "\n                    </h1>\n                    <p style=\"color: rgba(255,255,255,0.9); margin: 8px 0 0 0; font-size: 16px; font-weight: 300;\" class=\"mobile-text\">\n                      ").concat(t.subtitle, " \uD83D\uDDFA\uFE0F\n                    </p>\n                    <div style=\"position: absolute; top: 20px; right: 30px; opacity: 0.3; font-size: 24px;\" class=\"mobile-hide\" aria-hidden=\"true\">\u2708\uFE0F</div>\n                    <div style=\"position: absolute; top: 30px; left: 30px; opacity: 0.3; font-size: 20px;\" class=\"mobile-hide\" aria-hidden=\"true\">\uD83C\uDF0D</div>\n                  </td>\n                </tr>\n              </table>\n            </td>\n          </tr>\n          \n          <!-- Main Content -->\n          <tr>\n            <td style=\"padding: 40px 30px;\" class=\"mobile-padding\">\n              <div style=\"font-size: 16px; line-height: 1.6; color: #2c3e50;\" class=\"mobile-text dark-text\">\n                ").concat(content, "\n              </div>\n            </td>\n          </tr>\n          \n          <!-- CTA Section -->\n          <tr>\n            <td style=\"padding: 0 30px 30px 30px;\" class=\"mobile-padding\">\n              <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); border-radius: 20px; overflow: hidden;\">\n                <tr>\n                  <td style=\"padding: 30px; text-align: center; position: relative;\">\n                    <div style=\"position: absolute; top: 15px; right: 20px; opacity: 0.2; font-size: 40px;\" class=\"mobile-hide\" aria-hidden=\"true\">\uD83D\uDCF1</div>\n                    <div style=\"position: absolute; bottom: 15px; left: 20px; opacity: 0.2; font-size: 30px;\" class=\"mobile-hide\" aria-hidden=\"true\">\uD83D\uDD25</div>\n                    \n                    <h3 style=\"color: #ffffff; margin: 0 0 15px 0; font-size: 20px; font-weight: 600;\">\n                      \uD83C\uDFAF Restez libre & prot\u00E9g\u00E9\n                    </h3>\n                    <p style=\"color: rgba(255,255,255,0.9); margin: 0 0 20px 0; font-size: 15px;\" class=\"mobile-text\">\n                      T\u00E9l\u00E9chargez l'app qui r\u00E9volutionne vos voyages\n                    </p>\n                    \n                    <!-- CTA Button -->\n                    <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" style=\"margin: 0 auto;\">\n                      <tr>\n                        <td style=\"border-radius: 50px; background: #ffffff;\">\n                          <a href=\"").concat(appUrl, "\" \n                             style=\"display: inline-block; background: #ffffff; color: #ee5a24; padding: 12px 30px; border-radius: 50px; text-decoration: none; font-weight: 600; font-size: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);\" \n                             class=\"touch-target mobile-button high-contrast\"\n                             target=\"_blank\"\n                             rel=\"noopener noreferrer\"\n                             role=\"button\"\n                             aria-label=\"").concat(t.ctaText, " - Ouvre dans un nouvel onglet\">\n                            \uD83C\uDF1F ").concat(t.ctaText, "\n                          </a>\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n              </table>\n            </td>\n          </tr>\n          \n          <!-- Share Section -->\n          <tr>\n            <td style=\"padding: 0 30px 40px 30px;\" class=\"mobile-padding\">\n              <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); border-radius: 18px; overflow: hidden;\">\n                <tr>\n                  <td style=\"padding: 25px; text-align: center; position: relative;\">\n                    <div style=\"position: absolute; top: 10px; left: 20px; opacity: 0.3; font-size: 25px;\" class=\"mobile-hide\" aria-hidden=\"true\">\uD83D\uDC8E</div>\n                    <div style=\"position: absolute; bottom: 10px; right: 20px; opacity: 0.3; font-size: 20px;\" class=\"mobile-hide\" aria-hidden=\"true\">\uD83D\uDE80</div>\n                    \n                    <p style=\"color: #2c3e50; margin: 0 0 15px 0; font-size: 16px; font-weight: 500;\" class=\"dark-text\">\n                      \uD83C\uDF89 Vous kiffez l'exp\u00E9rience ?\n                    </p>\n                    <p style=\"color: #555; margin: 0 0 20px 0; font-size: 14px;\" class=\"mobile-text dark-secondary\">\n                      ").concat(t.shareText, "\n                    </p>\n                    \n                    <!-- Share Button -->\n                    <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" style=\"margin: 0 auto;\">\n                      <tr>\n                        <td style=\"border-radius: 25px; background: #25D366;\">\n                          <a href=\"").concat(whatsappUrl, "\" \n                             style=\"display: inline-block; background: #25D366; color: #ffffff; padding: 10px 25px; border-radius: 25px; text-decoration: none; font-weight: 500; font-size: 14px; box-shadow: 0 3px 10px rgba(37, 211, 102, 0.3);\" \n                             class=\"touch-target mobile-button high-contrast\"\n                             target=\"_blank\"\n                             rel=\"noopener noreferrer\"\n                             role=\"button\"\n                             aria-label=\"Partager sur WhatsApp - Ouvre dans un nouvel onglet\">\n                            \uD83D\uDCAC Partager sur WhatsApp\n                          </a>\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n              </table>\n            </td>\n          </tr>\n          \n          <!-- Footer -->\n          <tr>\n            <td style=\"background: #f8f9fa; padding: 25px 30px; text-align: center; border-top: 1px solid #e9ecef;\" class=\"mobile-padding dark-bg\">\n              <p style=\"margin: 0; font-size: 13px; color: #6c757d;\" class=\"dark-secondary\">\n                \uD83C\uDF0D \u00A9 ").concat(currentYear, " ").concat(t.title, " \u2013 ").concat(t.footerText, "\n              </p>\n            </td>\n          </tr>\n          \n        </table>\n      </td>\n    </tr>\n  </table>\n  \n  <!-- Analytics & Tracking -->\n  <div style=\"display: none;\">\n    <img src=\"https://sos-expat.app/api/email-tracking?campaign=").concat(config.campaignId, "&user=").concat(config.userId, "&locale=").concat(config.locale, "\" width=\"1\" height=\"1\" alt=\"\" />\n  </div>\n  \n</body>\n</html>");
};
exports.baseTemplate = baseTemplate;
